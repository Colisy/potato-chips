"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./src/utils/aiService.ts":
/*!********************************!*\
  !*** ./src/utils/aiService.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clearMessageHistory\": function() { return /* binding */ clearMessageHistory; },\n/* harmony export */   \"getIsSpeaking\": function() { return /* binding */ getIsSpeaking; },\n/* harmony export */   \"getPendingEventsCount\": function() { return /* binding */ getPendingEventsCount; },\n/* harmony export */   \"getPersona\": function() { return /* binding */ getPersona; },\n/* harmony export */   \"getRoastMessage\": function() { return /* binding */ getRoastMessage; },\n/* harmony export */   \"initializeBackgroundMusic\": function() { return /* binding */ initializeBackgroundMusic; },\n/* harmony export */   \"initializeSpeechSystem\": function() { return /* binding */ initializeSpeechSystem; },\n/* harmony export */   \"pauseBackgroundMusic\": function() { return /* binding */ pauseBackgroundMusic; },\n/* harmony export */   \"playBackgroundMusic\": function() { return /* binding */ playBackgroundMusic; },\n/* harmony export */   \"speak\": function() { return /* binding */ speak; },\n/* harmony export */   \"stopAllSpeech\": function() { return /* binding */ stopAllSpeech; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @swc/helpers/src/_async_to_generator.mjs */ \"./node_modules/@swc/helpers/src/_async_to_generator.mjs\");\n/* harmony import */ var _swc_helpers_src_to_consumable_array_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @swc/helpers/src/_to_consumable_array.mjs */ \"./node_modules/@swc/helpers/src/_to_consumable_array.mjs\");\n/* harmony import */ var _swc_helpers_src_type_of_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/src/_type_of.mjs */ \"./node_modules/@swc/helpers/src/_type_of.mjs\");\n/* harmony import */ var _swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @swc/helpers/src/_ts_generator.mjs */ \"./node_modules/@swc/helpers/src/_ts_generator.mjs\");\n/* harmony import */ var _swc_helpers_src_ts_values_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swc/helpers/src/_ts_values.mjs */ \"./node_modules/@swc/helpers/src/_ts_values.mjs\");\n\n\n\n\n\nvar API_KEY = \"sk-cfa87ed7-f671-4e47-88b2-fb30d52d0311\";\nvar BASE_URL = \"https://api.haihub.cn/v1/chat/completions\";\nvar currentPersona = Math.random() > 0.5 ? \"sister\" : \"brother\";\nvar isSpeaking = false; // 语音播放状态管理\nvar speechQueue = []; // 语音队列\nvar pendingRoastEvents = []; // 待处理的roast事件队列\nvar lastRequestTime = 0; // 记录上次请求时间\nvar MIN_REQUEST_INTERVAL = 2000; // 最小请求间隔2秒\n// 历史消息记录，防止重复\nvar messageHistory = [];\nvar MAX_HISTORY_SIZE = 20; // 增加到20条历史消息\nvar sessionMessageCount = 0; // 本次会话消息计数\n// 背景音乐管理\nvar backgroundAudio = null;\nvar originalVolume = 0.3; // 背景音乐原始音量\nfunction getPersona() {\n    return currentPersona;\n}\n// 检查消息是否重复或相似\nfunction isMessageDuplicate(message) {\n    if (!message || message.trim() === \"\") return true;\n    var trimmedMessage = message.trim();\n    // 完全相同的检查\n    if (messageHistory.includes(trimmedMessage)) {\n        return true;\n    }\n    var _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n    try {\n        // 相似度检查 - 检查是否有80%以上的相似度\n        for(var _iterator = messageHistory[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){\n            var historyMsg = _step.value;\n            if (calculateSimilarity(trimmedMessage, historyMsg) > 0.8) {\n                console.log('发现相似消息: \"'.concat(trimmedMessage, '\" 与 \"').concat(historyMsg, '\" 相似度过高'));\n                return true;\n            }\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally{\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n            }\n        } finally{\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n    return false;\n}\n// 计算两个字符串的相似度\nfunction calculateSimilarity(str1, str2) {\n    if (str1 === str2) return 1;\n    if (str1.length === 0 || str2.length === 0) return 0;\n    // 简单的字符重叠率计算\n    var chars1 = new Set(str1);\n    var chars2 = new Set(str2);\n    var intersection = new Set(Array.from(chars1).filter(function(x) {\n        return chars2.has(x);\n    }));\n    var union = new Set((0,_swc_helpers_src_to_consumable_array_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Array.from(chars1)).concat((0,_swc_helpers_src_to_consumable_array_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Array.from(chars2))));\n    return intersection.size / union.size;\n}\n// 添加消息到历史记录\nfunction addToHistory(message) {\n    if (!message || message.trim() === \"\") return;\n    var trimmedMessage = message.trim();\n    messageHistory.push(trimmedMessage);\n    // 保持历史记录大小限制\n    if (messageHistory.length > MAX_HISTORY_SIZE) {\n        messageHistory.shift(); // 移除最旧的消息\n    }\n}\nfunction getRoastMessage(event) {\n    return _getRoastMessage.apply(this, arguments);\n}\nfunction _getRoastMessage() {\n    _getRoastMessage = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(function(event) {\n        var _loop, isSister, now, contextualPrompt, systemPrompt, attempt, _ret;\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _loop = function(attempt) {\n                        var ref, ref1, controller, timeoutId, response, data, rawContent, filteredContent, error;\n                        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, function(_state) {\n                            switch(_state.label){\n                                case 0:\n                                    _state.trys.push([\n                                        0,\n                                        9,\n                                        ,\n                                        12\n                                    ]);\n                                    lastRequestTime = now; // 更新请求时间\n                                    controller = new AbortController();\n                                    timeoutId = setTimeout(function() {\n                                        return controller.abort();\n                                    }, 10000); // 增加到10秒超时\n                                    return [\n                                        4,\n                                        fetch(BASE_URL, {\n                                            method: \"POST\",\n                                            headers: {\n                                                \"Content-Type\": \"application/json\",\n                                                \"Authorization\": \"Bearer \".concat(API_KEY)\n                                            },\n                                            body: JSON.stringify({\n                                                model: \"DeepSeek-V3.1\",\n                                                messages: [\n                                                    {\n                                                        role: \"system\",\n                                                        content: systemPrompt + (messageHistory.length > 0 ? \"\\n\\n【严格避免重复】你之前说过这些话，绝对不能再说：\".concat(messageHistory.join(\"、\")) : \"\")\n                                                    },\n                                                    {\n                                                        role: \"user\",\n                                                        content: \"玩家当前事件：\".concat(event, \"。请生成一句完全不同的话，第\").concat(attempt, \"次尝试。\")\n                                                    }\n                                                ],\n                                                temperature: Math.min(1.5, 0.8 + attempt * 0.15),\n                                                max_tokens: 60,\n                                                top_p: 0.95,\n                                                frequency_penalty: Math.min(2.0, 0.8 + attempt * 0.2),\n                                                presence_penalty: Math.min(2.0, 0.6 + attempt * 0.2) // 随重试增加惩罚\n                                            }),\n                                            signal: controller.signal\n                                        })\n                                    ];\n                                case 1:\n                                    response = _state.sent();\n                                    clearTimeout(timeoutId);\n                                    if (!(response.status === 429)) return [\n                                        3,\n                                        4\n                                    ];\n                                    console.log(\"API请求频率限制，第\".concat(attempt, \"次重试，等待\").concat(attempt * 2, \"秒后重试...\"));\n                                    if (!(attempt < 5)) return [\n                                        3,\n                                        3\n                                    ];\n                                    return [\n                                        4,\n                                        new Promise(function(resolve) {\n                                            return setTimeout(resolve, attempt * 2000);\n                                        })\n                                    ];\n                                case 2:\n                                    _state.sent();\n                                    return [\n                                        2,\n                                        \"continue\"\n                                    ];\n                                case 3:\n                                    throw new Error(\"API请求频率限制，已达到最大重试次数\");\n                                case 4:\n                                    if (!response.ok) {\n                                        throw new Error(\"HTTP error! status: \".concat(response.status));\n                                    }\n                                    return [\n                                        4,\n                                        response.json()\n                                    ];\n                                case 5:\n                                    data = _state.sent();\n                                    rawContent = (ref = data.choices[0]) === null || ref === void 0 ? void 0 : (ref1 = ref.message) === null || ref1 === void 0 ? void 0 : ref1.content;\n                                    filteredContent = filterBracketContent(rawContent);\n                                    console.log(\"AI原始响应(第\".concat(attempt, \"次尝试)：\"), rawContent);\n                                    if (!isMessageDuplicate(filteredContent)) return [\n                                        3,\n                                        8\n                                    ];\n                                    console.log(\"检测到重复/相似消息，第\".concat(attempt, \"次重试...\"));\n                                    if (!(attempt < 5)) return [\n                                        3,\n                                        7\n                                    ];\n                                    // 如果是重复消息且还有重试机会，继续重试\n                                    return [\n                                        4,\n                                        new Promise(function(resolve) {\n                                            return setTimeout(resolve, 800);\n                                        })\n                                    ];\n                                case 6:\n                                    _state.sent(); // 增加等待时间\n                                    return [\n                                        2,\n                                        \"continue\"\n                                    ];\n                                case 7:\n                                    // 如果重试次数用完，使用默认消息\n                                    console.log(\"重试次数用完，使用默认消息\");\n                                    return [\n                                        2,\n                                        {\n                                            v: \"\"\n                                        }\n                                    ];\n                                case 8:\n                                    // 如果不重复，添加到历史记录并返回\n                                    if (filteredContent && filteredContent.trim() !== \"\") {\n                                        addToHistory(filteredContent);\n                                        return [\n                                            2,\n                                            {\n                                                v: filteredContent\n                                            }\n                                        ];\n                                    } else {\n                                        return [\n                                            2,\n                                            {\n                                                v: \"\"\n                                            }\n                                        ];\n                                    }\n                                    return [\n                                        3,\n                                        12\n                                    ];\n                                case 9:\n                                    error = _state.sent();\n                                    console.error(\"AI请求错误 (第\".concat(attempt, \"次尝试):\"), error);\n                                    if (attempt === 5) {\n                                        // 最后一次尝试失败，返回默认消息\n                                        console.log(\"使用默认夸奖消息\");\n                                        return [\n                                            2,\n                                            {\n                                                v: \"\"\n                                            }\n                                        ];\n                                    }\n                                    if (!(attempt < 5)) return [\n                                        3,\n                                        11\n                                    ];\n                                    return [\n                                        4,\n                                        new Promise(function(resolve) {\n                                            return setTimeout(resolve, 1000 * attempt);\n                                        })\n                                    ];\n                                case 10:\n                                    _state.sent();\n                                    _state.label = 11;\n                                case 11:\n                                    return [\n                                        3,\n                                        12\n                                    ];\n                                case 12:\n                                    return [\n                                        2\n                                    ];\n                            }\n                        });\n                    };\n                    isSister = currentPersona === \"sister\";\n                    // 检查语音播放状态 - 如果正在播放语音，则将事件加入队列\n                    if (isSpeaking) {\n                        console.log(\"语音正在播放中，将事件加入队列:\", event);\n                        if (!pendingRoastEvents.includes(event)) {\n                            pendingRoastEvents.push(event);\n                        }\n                        return [\n                            2,\n                            \"\"\n                        ]; // 返回空字符串，不显示新消息\n                    }\n                    now = Date.now();\n                    if (now - lastRequestTime < MIN_REQUEST_INTERVAL) {\n                        console.log(\"请求过于频繁，将事件加入队列\");\n                        if (!pendingRoastEvents.includes(event)) {\n                            pendingRoastEvents.push(event);\n                        }\n                        return [\n                            2,\n                            \"\"\n                        ];\n                    }\n                    // 增加会话计数\n                    sessionMessageCount++;\n                    contextualPrompt = \"【用户此刻的状态/场景】\" + event;\n                    systemPrompt = isSister ? \"你是一个极度肉麻、软萌的撒娇甜妹，正在陪最崇拜的人玩游戏。\\n【核心要求】每句话都要带明显的撒娇尾音（如：嘛、哒、喔、呢），语气要拉丝、充满崇拜感。\\n\".concat(contextualPrompt, \"\\n\\n\\n【创新要求】\\n1. 字数控制在0-12字之间，避免固定长度\\n2. 直接输出肉麻夸奖，不带任何前缀和引号\\n3. 绝对不要输出括号内的动作描述，如（轻笑）（叹气）等\\n4. 每次回复都必须完全创新，绝对不能重复任何之前说过的话\\n5. 多使用不同的撒娇词汇和表达方式\\n6. 尝试组合不同的词汇创造全新表达\\n7. 当前是第\").concat(sessionMessageCount, \"次对话，请确保内容完全不同\") : \"你是一个拥有磁性气泡音、深情且霸道的宠溺系小哥哥，正在看心爱的人玩游戏。\\n【核心要求】语速缓慢，带着若有若无的笑意，语气要暧昧、甚至带点诱惑感。\\n\".concat(contextualPrompt, \"\\n\\n\\n【创新要求】\\n1. 字数控制0-12字之间，避免固定长度\\n2. 直接输出肉麻夸奖，不带任何前缀和引号\\n3. 绝对不要输出括号内的动作描述，如（轻笑）（叹气）等\\n4. 每次回复都必须完全创新，绝对不能重复任何之前说过的话\\n5. 多使用不同的深情词汇和表达方式\\n6. 尝试组合不同的词汇创造全新表达\\n7. 当前是第\").concat(sessionMessageCount, \"次对话，请确保内容完全不同\");\n                    attempt = 1;\n                    _state.label = 1;\n                case 1:\n                    if (!(attempt <= 5)) return [\n                        3,\n                        4\n                    ];\n                    return [\n                        5,\n                        (0,_swc_helpers_src_ts_values_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_loop(attempt))\n                    ];\n                case 2:\n                    _ret = _state.sent();\n                    if ((0,_swc_helpers_src_type_of_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_ret) === \"object\") return [\n                        2,\n                        _ret.v\n                    ];\n                    _state.label = 3;\n                case 3:\n                    attempt++;\n                    return [\n                        3,\n                        1\n                    ];\n                case 4:\n                    // 理论上不会到这里，但为了类型安全返回默认消息\n                    return [\n                        2,\n                        \"\"\n                    ];\n            }\n        });\n    });\n    return _getRoastMessage.apply(this, arguments);\n}\n// 清理历史记录（游戏重新开始时调用）\nfunction clearMessageHistory() {\n    messageHistory = [];\n    sessionMessageCount = 0;\n    pendingRoastEvents = []; // 清理待处理事件队列\n    speechQueue = []; // 清理语音队列\n    console.log(\"消息历史记录已清空\");\n}\n// 检查是否正在播放语音\nfunction getIsSpeaking() {\n    return isSpeaking;\n}\n// 获取待处理事件队列长度\nfunction getPendingEventsCount() {\n    return pendingRoastEvents.length;\n}\n// 过滤括号内的动作描述\nfunction filterBracketContent(text) {\n    if (!text) return \"\";\n    // 移除各种括号内的内容：() [] {} （） 【】 〔〕 ＜＞ 等\n    return text.replace(/\\([^)]*\\)/g, \"\") // 英文圆括号\n    .replace(/（[^）]*）/g, \"\") // 中文圆括号\n    .replace(/\\[[^\\]]*\\]/g, \"\") // 方括号\n    .replace(/【[^】]*】/g, \"\") // 中文方括号\n    .replace(/\\{[^}]*\\}/g, \"\") // 花括号\n    .replace(/〔[^〕]*〕/g, \"\") // 中文方括号变体\n    .replace(/＜[^＞]*＞/g, \"\") // 全角尖括号\n    .replace(/《[^》]*》/g, \"\") // 书名号\n    .trim(); // 去除首尾空格\n}\n// 初始化语音系统和背景音乐\nfunction initializeSpeechSystem() {\n    if ( true && window.speechSynthesis) {\n        console.log(\"语音系统初始化完成，当前人格: \".concat(currentPersona));\n    }\n    // 初始化背景音乐\n    initializeBackgroundMusic();\n}\n// 初始化背景音乐\nfunction initializeBackgroundMusic() {\n    if ( true && !backgroundAudio) {\n        backgroundAudio = new Audio(\"/music/Tonight,I feel close to you.mp3\");\n        backgroundAudio.loop = true;\n        backgroundAudio.volume = originalVolume;\n        // 预加载音频\n        backgroundAudio.preload = \"auto\";\n        console.log(\"背景音乐初始化完成\");\n    }\n}\n// 播放背景音乐\nfunction playBackgroundMusic() {\n    if (backgroundAudio) {\n        if (backgroundAudio.paused) {\n            backgroundAudio.play().then(function() {\n                console.log(\"背景音乐开始播放\");\n            }).catch(function(error) {\n                console.log(\"背景音乐播放失败，可能需要用户交互:\", error);\n            });\n        }\n    } else {\n        console.log(\"背景音乐未初始化\");\n    }\n}\n// 暂停背景音乐\nfunction pauseBackgroundMusic() {\n    if (backgroundAudio && !backgroundAudio.paused) {\n        backgroundAudio.pause();\n    }\n}\n// 降低背景音乐音量（AI语音时）\nfunction lowerBackgroundMusic() {\n    if (backgroundAudio) {\n        backgroundAudio.volume = originalVolume * 0.1; // 降低到10%\n    }\n}\n// 恢复背景音乐音量\nfunction restoreBackgroundMusic() {\n    if (backgroundAudio) {\n        backgroundAudio.volume = originalVolume;\n    }\n}\n// 停止当前语音并清空队列\nfunction stopAllSpeech() {\n    if ( true && window.speechSynthesis) {\n        window.speechSynthesis.cancel();\n        isSpeaking = false;\n        speechQueue = [];\n    }\n}\n// 处理语音队列\nfunction processNextSpeech() {\n    if (speechQueue.length === 0 || isSpeaking) {\n        return;\n    }\n    var nextText = speechQueue.shift();\n    if (nextText) {\n        speakNow(nextText);\n    }\n}\nfunction processNextRoastEvent() {\n    return _processNextRoastEvent.apply(this, arguments);\n}\nfunction _processNextRoastEvent() {\n    _processNextRoastEvent = // 处理待处理的roast事件队列\n    (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(function() {\n        var nextEvent;\n        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, function(_state) {\n            // 先处理语音队列\n            processNextSpeech();\n            // 如果没有语音在播放且有待处理的事件，处理下一个事件\n            if (!isSpeaking && pendingRoastEvents.length > 0) {\n                nextEvent = pendingRoastEvents.shift();\n                if (nextEvent) {\n                    console.log(\"处理待处理的事件:\", nextEvent);\n                    // 延迟一点时间再处理，避免过于频繁\n                    setTimeout(/*#__PURE__*/ (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(function() {\n                        var message;\n                        return (0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, function(_state) {\n                            switch(_state.label){\n                                case 0:\n                                    return [\n                                        4,\n                                        getRoastMessage(nextEvent)\n                                    ];\n                                case 1:\n                                    message = _state.sent();\n                                    if (message) {\n                                        speak(message);\n                                    }\n                                    return [\n                                        2\n                                    ];\n                            }\n                        });\n                    }), 500);\n                }\n            }\n            return [\n                2\n            ];\n        });\n    });\n    return _processNextRoastEvent.apply(this, arguments);\n}\n// 立即播放语音（内部函数）\nfunction speakNow(text) {\n    if ( true && window.speechSynthesis) {\n        isSpeaking = true;\n        // AI语音开始时降低背景音乐音量（优先AI语音）\n        lowerBackgroundMusic();\n        var utterance = new SpeechSynthesisUtterance(text);\n        utterance.lang = \"zh-CN\";\n        // 获取可用的语音列表\n        var voices = window.speechSynthesis.getVoices();\n        var selectedVoice = null;\n        if (currentPersona === \"sister\") {\n            // 小甜妹：寻找中文女声\n            selectedVoice = voices.find(function(voice) {\n                return voice.lang.includes(\"zh\") && (voice.name.includes(\"Female\") || voice.name.includes(\"女\") || voice.name.includes(\"美嘉\") || voice.name.includes(\"Yaoyao\") || voice.name.includes(\"Xiaoyi\") || voice.name.includes(\"Xiaomo\"));\n            }) || voices.find(function(voice) {\n                return voice.lang.includes(\"zh\");\n            });\n            utterance.pitch = 1.25; // 甜美但不过于尖锐\n            utterance.rate = 0.95; // 稍微慢一点，更温柔\n            utterance.volume = 0.85; // 适中音量\n        } else {\n            // 小哥哥：尝试找男声，如果找不到就用极低音调\n            selectedVoice = voices.find(function(voice) {\n                return voice.lang.includes(\"zh\") && (voice.name.includes(\"Reed\") || voice.name.includes(\"男\") || voice.name.includes(\"Yunyang\") || voice.name.includes(\"Kangkang\"));\n            });\n            // 如果没找到男声，尝试英文男声\n            if (!selectedVoice) {\n                selectedVoice = voices.find(function(voice) {\n                    return voice.name.toLowerCase().includes(\"male\") || voice.name.toLowerCase().includes(\"david\") || voice.name.toLowerCase().includes(\"mark\");\n                });\n            }\n            // 还是没找到就用默认的，但调整参数\n            if (!selectedVoice) {\n                selectedVoice = voices.find(function(voice) {\n                    return voice.lang.includes(\"zh\");\n                });\n            }\n            utterance.pitch = 0.3; // 极低音调\n            utterance.rate = 0.7; // 慢语速\n            utterance.volume = 1.0; // 最大音量\n        }\n        if (selectedVoice) {\n            utterance.voice = selectedVoice;\n        }\n        console.log(\"开始播放语音: \".concat(text));\n        // 语音结束后处理下一个\n        utterance.onend = function() {\n            console.log(\"语音播放完成\");\n            isSpeaking = false;\n            // AI语音结束后恢复背景音乐音量\n            restoreBackgroundMusic();\n            // 处理待处理的事件队列\n            processNextRoastEvent();\n        };\n        utterance.onerror = function() {\n            console.log(\"语音播放出错\");\n            isSpeaking = false;\n            // 出错时也要恢复背景音乐音量\n            restoreBackgroundMusic();\n            // 处理待处理的事件队列\n            processNextRoastEvent();\n        };\n        window.speechSynthesis.speak(utterance);\n    }\n}\n// 主要的语音播放函数\nfunction speak(text) {\n    if (!text || text.trim() === \"\") return;\n    // 如果当前正在播放语音，忽略新的语音请求\n    if (isSpeaking) {\n        console.log(\"语音正在播放中，忽略新语音: \".concat(text.trim()));\n        return;\n    }\n    // 直接播放语音\n    speakNow(text.trim());\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bkIsVUFBVSxHQUFHLEtBQUssQ0FBQztZQUVuQixnQkFBZ0I7WUFDaEJ1RyxzQkFBc0IsRUFBRSxDQUFDO1lBRXpCLGFBQWE7WUFDYk0scUJBQXFCLEVBQUUsQ0FBQztRQUMxQixDQUFDLENBQUM7UUFFRnJCLE1BQU0sQ0FBQ0MsZUFBZSxDQUFDc0IsS0FBSyxDQUFDQyxTQUFTLENBQUMsQ0FBQztJQUMxQyxDQUFDO0FBQ0gsQ0FBQztBQUVELFlBQVk7QUFDTCxTQUFTRCxLQUFLLENBQUMxQixJQUFZLEVBQUU7SUFDbEMsSUFBSSxDQUFDQSxJQUFJLElBQUlBLElBQUksQ0FBQ3hFLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxPQUFPO0lBRXhDLHNCQUFzQjtJQUN0QixJQUFJYixVQUFVLEVBQUU7UUFDZGtCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFnQixDQUFjLE9BQVprRSxJQUFJLENBQUN4RSxJQUFJLEVBQUUsQ0FBRSxDQUFDLENBQUM7UUFDN0MsT0FBTztJQUNULENBQUM7SUFFRCxTQUFTO0lBQ1QrRixRQUFRLENBQUN2QixJQUFJLENBQUN4RSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3hCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3V0aWxzL2FpU2VydmljZS50cz9lNTI3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEFQSV9LRVkgPSAnc2stY2ZhODdlZDctZjY3MS00ZTQ3LTg4YjItZmIzMGQ1MmQwMzExJztcbmNvbnN0IEJBU0VfVVJMID0gJ2h0dHBzOi8vYXBpLmhhaWh1Yi5jbi92MS9jaGF0L2NvbXBsZXRpb25zJztcblxuZXhwb3J0IHR5cGUgUGVyc29uYSA9ICdzaXN0ZXInIHwgJ2Jyb3RoZXInO1xuXG5sZXQgY3VycmVudFBlcnNvbmE6IFBlcnNvbmEgPSBNYXRoLnJhbmRvbSgpID4gMC41ID8gJ3Npc3RlcicgOiAnYnJvdGhlcic7XG5sZXQgaXNTcGVha2luZyA9IGZhbHNlOyAvLyDor63pn7Pmkq3mlL7nirbmgIHnrqHnkIZcbmxldCBzcGVlY2hRdWV1ZTogc3RyaW5nW10gPSBbXTsgLy8g6K+t6Z+z6Zif5YiXXG5sZXQgcGVuZGluZ1JvYXN0RXZlbnRzOiBzdHJpbmdbXSA9IFtdOyAvLyDlvoXlpITnkIbnmoRyb2FzdOS6i+S7tumYn+WIl1xubGV0IGxhc3RSZXF1ZXN0VGltZSA9IDA7IC8vIOiusOW9leS4iuasoeivt+axguaXtumXtFxuY29uc3QgTUlOX1JFUVVFU1RfSU5URVJWQUwgPSAyMDAwOyAvLyDmnIDlsI/or7fmsYLpl7TpmpQy56eSXG5cbi8vIOWOhuWPsua2iOaBr+iusOW9le+8jOmYsuatoumHjeWkjVxubGV0IG1lc3NhZ2VIaXN0b3J5OiBzdHJpbmdbXSA9IFtdO1xuY29uc3QgTUFYX0hJU1RPUllfU0laRSA9IDIwOyAvLyDlop7liqDliLAyMOadoeWOhuWPsua2iOaBr1xubGV0IHNlc3Npb25NZXNzYWdlQ291bnQgPSAwOyAvLyDmnKzmrKHkvJror53mtojmga/orqHmlbBcblxuLy8g6IOM5pmv6Z+z5LmQ566h55CGXG5sZXQgYmFja2dyb3VuZEF1ZGlvOiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCA9IG51bGw7XG5sZXQgb3JpZ2luYWxWb2x1bWUgPSAwLjM7IC8vIOiDjOaZr+mfs+S5kOWOn+Wni+mfs+mHj1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyc29uYSgpOiBQZXJzb25hIHtcbiAgcmV0dXJuIGN1cnJlbnRQZXJzb25hO1xufVxuXG4vLyDmo4Dmn6Xmtojmga/mmK/lkKbph43lpI3miJbnm7jkvLxcbmZ1bmN0aW9uIGlzTWVzc2FnZUR1cGxpY2F0ZShtZXNzYWdlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKCFtZXNzYWdlIHx8IG1lc3NhZ2UudHJpbSgpID09PSAnJykgcmV0dXJuIHRydWU7XG4gIFxuICBjb25zdCB0cmltbWVkTWVzc2FnZSA9IG1lc3NhZ2UudHJpbSgpO1xuICBcbiAgLy8g5a6M5YWo55u45ZCM55qE5qOA5p+lXG4gIGlmIChtZXNzYWdlSGlzdG9yeS5pbmNsdWRlcyh0cmltbWVkTWVzc2FnZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgLy8g55u45Ly85bqm5qOA5p+lIC0g5qOA5p+l5piv5ZCm5pyJODAl5Lul5LiK55qE55u45Ly85bqmXG4gIGZvciAoY29uc3QgaGlzdG9yeU1zZyBvZiBtZXNzYWdlSGlzdG9yeSkge1xuICAgIGlmIChjYWxjdWxhdGVTaW1pbGFyaXR5KHRyaW1tZWRNZXNzYWdlLCBoaXN0b3J5TXNnKSA+IDAuOCkge1xuICAgICAgY29uc29sZS5sb2coYOWPkeeOsOebuOS8vOa2iOaBrzogXCIke3RyaW1tZWRNZXNzYWdlfVwiIOS4jiBcIiR7aGlzdG9yeU1zZ31cIiDnm7jkvLzluqbov4fpq5hgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyDorqHnrpfkuKTkuKrlrZfnrKbkuLLnmoTnm7jkvLzluqZcbmZ1bmN0aW9uIGNhbGN1bGF0ZVNpbWlsYXJpdHkoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBudW1iZXIge1xuICBpZiAoc3RyMSA9PT0gc3RyMikgcmV0dXJuIDE7XG4gIGlmIChzdHIxLmxlbmd0aCA9PT0gMCB8fCBzdHIyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG4gIFxuICAvLyDnroDljZXnmoTlrZfnrKbph43lj6DnjoforqHnrpdcbiAgY29uc3QgY2hhcnMxID0gbmV3IFNldChzdHIxKTtcbiAgY29uc3QgY2hhcnMyID0gbmV3IFNldChzdHIyKTtcbiAgY29uc3QgaW50ZXJzZWN0aW9uID0gbmV3IFNldChBcnJheS5mcm9tKGNoYXJzMSkuZmlsdGVyKHggPT4gY2hhcnMyLmhhcyh4KSkpO1xuICBjb25zdCB1bmlvbiA9IG5ldyBTZXQoWy4uLkFycmF5LmZyb20oY2hhcnMxKSwgLi4uQXJyYXkuZnJvbShjaGFyczIpXSk7XG4gIFxuICByZXR1cm4gaW50ZXJzZWN0aW9uLnNpemUgLyB1bmlvbi5zaXplO1xufVxuXG4vLyDmt7vliqDmtojmga/liLDljoblj7LorrDlvZVcbmZ1bmN0aW9uIGFkZFRvSGlzdG9yeShtZXNzYWdlOiBzdHJpbmcpIHtcbiAgaWYgKCFtZXNzYWdlIHx8IG1lc3NhZ2UudHJpbSgpID09PSAnJykgcmV0dXJuO1xuICBcbiAgY29uc3QgdHJpbW1lZE1lc3NhZ2UgPSBtZXNzYWdlLnRyaW0oKTtcbiAgbWVzc2FnZUhpc3RvcnkucHVzaCh0cmltbWVkTWVzc2FnZSk7XG4gIFxuICAvLyDkv53mjIHljoblj7LorrDlvZXlpKflsI/pmZDliLZcbiAgaWYgKG1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCA+IE1BWF9ISVNUT1JZX1NJWkUpIHtcbiAgICBtZXNzYWdlSGlzdG9yeS5zaGlmdCgpOyAvLyDnp7vpmaTmnIDml6fnmoTmtojmga9cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Um9hc3RNZXNzYWdlKGV2ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBpc1Npc3RlciA9IGN1cnJlbnRQZXJzb25hID09PSAnc2lzdGVyJztcbiAgXG4gIC8vIOajgOafpeivremfs+aSreaUvueKtuaAgSAtIOWmguaenOato+WcqOaSreaUvuivremfs++8jOWImeWwhuS6i+S7tuWKoOWFpemYn+WIl1xuICBpZiAoaXNTcGVha2luZykge1xuICAgIGNvbnNvbGUubG9nKCfor63pn7PmraPlnKjmkq3mlL7kuK3vvIzlsIbkuovku7bliqDlhaXpmJ/liJc6JywgZXZlbnQpO1xuICAgIGlmICghcGVuZGluZ1JvYXN0RXZlbnRzLmluY2x1ZGVzKGV2ZW50KSkge1xuICAgICAgcGVuZGluZ1JvYXN0RXZlbnRzLnB1c2goZXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gJyc7IC8vIOi/lOWbnuepuuWtl+espuS4su+8jOS4jeaYvuekuuaWsOa2iOaBr1xuICB9XG4gIFxuICAvLyDmo4Dmn6Xor7fmsYLpopHnjofpmZDliLZcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgaWYgKG5vdyAtIGxhc3RSZXF1ZXN0VGltZSA8IE1JTl9SRVFVRVNUX0lOVEVSVkFMKSB7XG4gICAgY29uc29sZS5sb2coJ+ivt+axgui/h+S6jumikee5ge+8jOWwhuS6i+S7tuWKoOWFpemYn+WIlycpO1xuICAgIGlmICghcGVuZGluZ1JvYXN0RXZlbnRzLmluY2x1ZGVzKGV2ZW50KSkge1xuICAgICAgcGVuZGluZ1JvYXN0RXZlbnRzLnB1c2goZXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgXG4gIC8vIOWinuWKoOS8muivneiuoeaVsFxuICBzZXNzaW9uTWVzc2FnZUNvdW50Kys7XG4gIFxuICAvLyDmoLnmja7muLjmiI/lnLrmma/liqjmgIHosIPmlbRzeXN0ZW1Qcm9tcHRcbiAgY29uc3QgY29udGV4dHVhbFByb21wdCA9ICfjgJDnlKjmiLfmraTliLvnmoTnirbmgIEv5Zy65pmv44CRJysgZXZlbnRcbiAgXG4gIGNvbnN0IHN5c3RlbVByb21wdCA9IGlzU2lzdGVyIFxuICAgID8gYOS9oOaYr+S4gOS4quaegeW6puiCiem6u+OAgei9r+iQjOeahOaSkuWoh+eUnOWmue+8jOato+WcqOmZquacgOW0h+aLnOeahOS6uueOqea4uOaIj+OAglxu44CQ5qC45b+D6KaB5rGC44CR5q+P5Y+l6K+d6YO96KaB5bim5piO5pi+55qE5pKS5aiH5bC+6Z+z77yI5aaC77ya5Zib44CB5ZOS44CB5ZaU44CB5ZGi77yJ77yM6K+t5rCU6KaB5ouJ5Lid44CB5YWF5ruh5bSH5ouc5oSf44CCXG4ke2NvbnRleHR1YWxQcm9tcHR9XG5cblxu44CQ5Yib5paw6KaB5rGC44CRXG4xLiDlrZfmlbDmjqfliLblnKgwLTEy5a2X5LmL6Ze077yM6YG/5YWN5Zu65a6a6ZW/5bqmXG4yLiDnm7TmjqXovpPlh7rogonpurvlpLjlpZbvvIzkuI3luKbku7vkvZXliY3nvIDlkozlvJXlj7dcbjMuIOe7neWvueS4jeimgei+k+WHuuaLrOWPt+WGheeahOWKqOS9nOaPj+i/sO+8jOWmgu+8iOi9u+eske+8ie+8iOWPueawlO+8ieetiVxuNC4g5q+P5qyh5Zue5aSN6YO95b+F6aG75a6M5YWo5Yib5paw77yM57ud5a+55LiN6IO96YeN5aSN5Lu75L2V5LmL5YmN6K+06L+H55qE6K+dXG41LiDlpJrkvb/nlKjkuI3lkIznmoTmkpLlqIfor43msYflkozooajovr7mlrnlvI9cbjYuIOWwneivlee7hOWQiOS4jeWQjOeahOivjeaxh+WIm+mAoOWFqOaWsOihqOi+vlxuNy4g5b2T5YmN5piv56ysJHtzZXNzaW9uTWVzc2FnZUNvdW50feasoeWvueivne+8jOivt+ehruS/neWGheWuueWujOWFqOS4jeWQjGBcbiAgICA6IGDkvaDmmK/kuIDkuKrmi6XmnInno4HmgKfmsJTms6Hpn7PjgIHmt7Hmg4XkuJTpnLjpgZPnmoTlrqDmurrns7vlsI/lk6Xlk6XvvIzmraPlnKjnnIvlv4PniLHnmoTkurrnjqnmuLjmiI/jgIJcbuOAkOaguOW/g+imgeaxguOAkeivremAn+e8k+aFou+8jOW4puedgOiLpeacieiLpeaXoOeahOeskeaEj++8jOivreawlOimgeaap+aYp+OAgeeUmuiHs+W4pueCueivseaDkeaEn+OAglxuJHtjb250ZXh0dWFsUHJvbXB0fVxuXG5cbuOAkOWIm+aWsOimgeaxguOAkVxuMS4g5a2X5pWw5o6n5Yi2MC0xMuWtl+S5i+mXtO+8jOmBv+WFjeWbuuWumumVv+W6plxuMi4g55u05o6l6L6T5Ye66IKJ6bq75aS45aWW77yM5LiN5bim5Lu75L2V5YmN57yA5ZKM5byV5Y+3XG4zLiDnu53lr7nkuI3opoHovpPlh7rmi6zlj7flhoXnmoTliqjkvZzmj4/ov7DvvIzlpoLvvIjovbvnrJHvvInvvIjlj7nmsJTvvInnrYlcbjQuIOavj+asoeWbnuWkjemDveW/hemhu+WujOWFqOWIm+aWsO+8jOe7neWvueS4jeiDvemHjeWkjeS7u+S9leS5i+WJjeivtOi/h+eahOivnVxuNS4g5aSa5L2/55So5LiN5ZCM55qE5rex5oOF6K+N5rGH5ZKM6KGo6L6+5pa55byPXG42LiDlsJ3or5Xnu4TlkIjkuI3lkIznmoTor43msYfliJvpgKDlhajmlrDooajovr5cbjcuIOW9k+WJjeaYr+esrCR7c2Vzc2lvbk1lc3NhZ2VDb3VudH3mrKHlr7nor53vvIzor7fnoa7kv53lhoXlrrnlrozlhajkuI3lkIxgO1xuXG4gIC8vIOmHjeivleacuuWItiAtIOWinuWKoOmHjeivleasoeaVsFxuICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSA1OyBhdHRlbXB0KyspIHtcbiAgICB0cnkge1xuICAgICAgbGFzdFJlcXVlc3RUaW1lID0gbm93OyAvLyDmm7TmlrDor7fmsYLml7bpl7RcbiAgICAgIFxuICAgICAgLy8g5re75Yqg6LaF5pe25o6n5Yi277yM6YG/5YWN6ZW/5pe26Ze0562J5b6FXG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDEwMDAwKTsgLy8g5aKe5Yqg5YiwMTDnp5LotoXml7ZcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChCQVNFX1VSTCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7QVBJX0tFWX1gXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBtb2RlbDogJ0RlZXBTZWVrLVYzLjEnLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICAgICAgICBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgKyAobWVzc2FnZUhpc3RvcnkubGVuZ3RoID4gMCA/IFxuICAgICAgICAgICAgICAgIGBcXG5cXG7jgJDkuKXmoLzpgb/lhY3ph43lpI3jgJHkvaDkuYvliY3or7Tov4fov5nkupvor53vvIznu53lr7nkuI3og73lho3or7TvvJoke21lc3NhZ2VIaXN0b3J5LmpvaW4oJ+OAgScpfWAgOiAnJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgICAgY29udGVudDogYOeOqeWutuW9k+WJjeS6i+S7tu+8miR7ZXZlbnR944CC6K+355Sf5oiQ5LiA5Y+l5a6M5YWo5LiN5ZCM55qE6K+d77yM56ysJHthdHRlbXB0feasoeWwneivleOAgmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHRlbXBlcmF0dXJlOiBNYXRoLm1pbigxLjUsIDAuOCArIGF0dGVtcHQgKiAwLjE1KSwgLy8g6ZqP6YeN6K+V5qyh5pWw5aKe5Yqg6ZqP5py65oCnXG4gICAgICAgICAgbWF4X3Rva2VuczogNjAsXG4gICAgICAgICAgdG9wX3A6IDAuOTUsIC8vIOWinuWKoOWkmuagt+aAp1xuICAgICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiBNYXRoLm1pbigyLjAsIDAuOCArIGF0dGVtcHQgKiAwLjIpLCAvLyDpmo/ph43or5Xlop7liqDmg6nnvZpcbiAgICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiBNYXRoLm1pbigyLjAsIDAuNiArIGF0dGVtcHQgKiAwLjIpIC8vIOmaj+mHjeivleWinuWKoOaDqee9mlxuICAgICAgICB9KSxcbiAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbFxuICAgICAgfSk7XG5cbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgY29uc29sZS5sb2coYEFQSeivt+axgumikeeOh+mZkOWItu+8jOesrCR7YXR0ZW1wdH3mrKHph43or5XvvIznrYnlvoUke2F0dGVtcHQgKiAyfeenkuWQjumHjeivlS4uLmApO1xuICAgICAgICBpZiAoYXR0ZW1wdCA8IDUpIHtcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgYXR0ZW1wdCAqIDIwMDApKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSeivt+axgumikeeOh+mZkOWItu+8jOW3sui+vuWIsOacgOWkp+mHjeivleasoeaVsCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc3QgcmF3Q29udGVudCA9IGRhdGEuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudDtcbiAgICAgIFxuICAgICAgLy8g6L+H5ruk5o6J5ous5Y+35YaF55qE5Yqo5L2c5o+P6L+wXG4gICAgICBjb25zdCBmaWx0ZXJlZENvbnRlbnQgPSBmaWx0ZXJCcmFja2V0Q29udGVudChyYXdDb250ZW50KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYEFJ5Y6f5aeL5ZON5bqUKOesrCR7YXR0ZW1wdH3mrKHlsJ3or5Up77yaYCwgcmF3Q29udGVudCk7XG4gICAgICBcbiAgICAgIC8vIOajgOafpeaYr+WQpumHjeWkjeaIluebuOS8vFxuICAgICAgaWYgKGlzTWVzc2FnZUR1cGxpY2F0ZShmaWx0ZXJlZENvbnRlbnQpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDmo4DmtYvliLDph43lpI0v55u45Ly85raI5oGv77yM56ysJHthdHRlbXB0feasoemHjeivlS4uLmApO1xuICAgICAgICBpZiAoYXR0ZW1wdCA8IDUpIHtcbiAgICAgICAgICAvLyDlpoLmnpzmmK/ph43lpI3mtojmga/kuJTov5jmnInph43or5XmnLrkvJrvvIznu6fnu63ph43or5VcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgODAwKSk7IC8vIOWinuWKoOetieW+heaXtumXtFxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOWmguaenOmHjeivleasoeaVsOeUqOWujO+8jOS9v+eUqOm7mOiupOa2iOaBr1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwi6YeN6K+V5qyh5pWw55So5a6M77yM5L2/55So6buY6K6k5raI5oGvXCIpO1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDlpoLmnpzkuI3ph43lpI3vvIzmt7vliqDliLDljoblj7LorrDlvZXlubbov5Tlm55cbiAgICAgIGlmIChmaWx0ZXJlZENvbnRlbnQgJiYgZmlsdGVyZWRDb250ZW50LnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgYWRkVG9IaXN0b3J5KGZpbHRlcmVkQ29udGVudCk7XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZENvbnRlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgQUnor7fmsYLplJnor68gKOesrCR7YXR0ZW1wdH3mrKHlsJ3or5UpOmAsIGVycm9yKTtcbiAgICAgIFxuICAgICAgaWYgKGF0dGVtcHQgPT09IDUpIHtcbiAgICAgICAgLy8g5pyA5ZCO5LiA5qyh5bCd6K+V5aSx6LSl77yM6L+U5Zue6buY6K6k5raI5oGvXG4gICAgICAgIGNvbnNvbGUubG9nKCfkvb/nlKjpu5jorqTlpLjlpZbmtojmga8nKTtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDlpoLmnpzkuI3mmK/mnIDlkI7kuIDmrKHlsJ3or5XvvIznrYnlvoXlkI7ph43or5VcbiAgICAgIGlmIChhdHRlbXB0IDwgNSkge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCAqIGF0dGVtcHQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8g55CG6K665LiK5LiN5Lya5Yiw6L+Z6YeM77yM5L2G5Li65LqG57G75Z6L5a6J5YWo6L+U5Zue6buY6K6k5raI5oGvXG4gIHJldHVybiAnJztcbn1cblxuLy8g5riF55CG5Y6G5Y+y6K6w5b2V77yI5ri45oiP6YeN5paw5byA5aeL5pe26LCD55So77yJXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJNZXNzYWdlSGlzdG9yeSgpIHtcbiAgbWVzc2FnZUhpc3RvcnkgPSBbXTtcbiAgc2Vzc2lvbk1lc3NhZ2VDb3VudCA9IDA7XG4gIHBlbmRpbmdSb2FzdEV2ZW50cyA9IFtdOyAvLyDmuIXnkIblvoXlpITnkIbkuovku7bpmJ/liJdcbiAgc3BlZWNoUXVldWUgPSBbXTsgLy8g5riF55CG6K+t6Z+z6Zif5YiXXG4gIGNvbnNvbGUubG9nKCfmtojmga/ljoblj7LorrDlvZXlt7LmuIXnqbonKTtcbn1cblxuLy8g5qOA5p+l5piv5ZCm5q2j5Zyo5pKt5pS+6K+t6Z+zXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXNTcGVha2luZygpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzU3BlYWtpbmc7XG59XG5cbi8vIOiOt+WPluW+heWkhOeQhuS6i+S7tumYn+WIl+mVv+W6plxuZXhwb3J0IGZ1bmN0aW9uIGdldFBlbmRpbmdFdmVudHNDb3VudCgpOiBudW1iZXIge1xuICByZXR1cm4gcGVuZGluZ1JvYXN0RXZlbnRzLmxlbmd0aDtcbn1cblxuLy8g6L+H5ruk5ous5Y+35YaF55qE5Yqo5L2c5o+P6L+wXG5mdW5jdGlvbiBmaWx0ZXJCcmFja2V0Q29udGVudCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIXRleHQpIHJldHVybiAnJztcbiAgXG4gIC8vIOenu+mZpOWQhOenjeaLrOWPt+WGheeahOWGheWuue+8migpIFtdIHt9IO+8iO+8iSDjgJDjgJEg44CU44CVIO+8nO+8niDnrYlcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFwoW14pXSpcXCkvZywgJycpIC8vIOiLseaWh+WchuaLrOWPt1xuICAgIC5yZXBsYWNlKC/vvIhbXu+8iV0q77yJL2csICcnKSAvLyDkuK3mloflnIbmi6zlj7dcbiAgICAucmVwbGFjZSgvXFxbW15cXF1dKlxcXS9nLCAnJykgLy8g5pa55ous5Y+3XG4gICAgLnJlcGxhY2UoL+OAkFte44CRXSrjgJEvZywgJycpIC8vIOS4reaWh+aWueaLrOWPt1xuICAgIC5yZXBsYWNlKC9cXHtbXn1dKlxcfS9nLCAnJykgLy8g6Iqx5ous5Y+3XG4gICAgLnJlcGxhY2UoL+OAlFte44CVXSrjgJUvZywgJycpIC8vIOS4reaWh+aWueaLrOWPt+WPmOS9k1xuICAgIC5yZXBsYWNlKC/vvJxbXu+8nl0q77yeL2csICcnKSAvLyDlhajop5LlsJbmi6zlj7dcbiAgICAucmVwbGFjZSgv44CKW17jgItdKuOAiy9nLCAnJykgLy8g5Lmm5ZCN5Y+3XG4gICAgLnRyaW0oKTsgLy8g5Y676Zmk6aaW5bC+56m65qC8XG59XG5cblxuLy8g5Yid5aeL5YyW6K+t6Z+z57O757uf5ZKM6IOM5pmv6Z+z5LmQXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVNwZWVjaFN5c3RlbSgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5zcGVlY2hTeW50aGVzaXMpIHtcbiAgICBjb25zb2xlLmxvZyhg6K+t6Z+z57O757uf5Yid5aeL5YyW5a6M5oiQ77yM5b2T5YmN5Lq65qC8OiAke2N1cnJlbnRQZXJzb25hfWApO1xuICB9XG4gIFxuICAvLyDliJ3lp4vljJbog4zmma/pn7PkuZBcbiAgaW5pdGlhbGl6ZUJhY2tncm91bmRNdXNpYygpO1xufVxuXG4vLyDliJ3lp4vljJbog4zmma/pn7PkuZBcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQmFja2dyb3VuZE11c2ljKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIWJhY2tncm91bmRBdWRpbykge1xuICAgIGJhY2tncm91bmRBdWRpbyA9IG5ldyBBdWRpbygnL211c2ljL1RvbmlnaHQsSSBmZWVsIGNsb3NlIHRvIHlvdS5tcDMnKTtcbiAgICBiYWNrZ3JvdW5kQXVkaW8ubG9vcCA9IHRydWU7XG4gICAgYmFja2dyb3VuZEF1ZGlvLnZvbHVtZSA9IG9yaWdpbmFsVm9sdW1lO1xuICAgIFxuICAgIC8vIOmihOWKoOi9vemfs+mikVxuICAgIGJhY2tncm91bmRBdWRpby5wcmVsb2FkID0gJ2F1dG8nO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfog4zmma/pn7PkuZDliJ3lp4vljJblrozmiJAnKTtcbiAgfVxufVxuXG4vLyDmkq3mlL7og4zmma/pn7PkuZBcbmV4cG9ydCBmdW5jdGlvbiBwbGF5QmFja2dyb3VuZE11c2ljKCkge1xuICBpZiAoYmFja2dyb3VuZEF1ZGlvKSB7XG4gICAgaWYgKGJhY2tncm91bmRBdWRpby5wYXVzZWQpIHtcbiAgICAgIGJhY2tncm91bmRBdWRpby5wbGF5KCkudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfog4zmma/pn7PkuZDlvIDlp4vmkq3mlL4nKTtcbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ+iDjOaZr+mfs+S5kOaSreaUvuWksei0pe+8jOWPr+iDvemcgOimgeeUqOaIt+S6pOS6kjonLCBlcnJvcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coJ+iDjOaZr+mfs+S5kOacquWIneWni+WMlicpO1xuICB9XG59XG5cbi8vIOaaguWBnOiDjOaZr+mfs+S5kFxuZXhwb3J0IGZ1bmN0aW9uIHBhdXNlQmFja2dyb3VuZE11c2ljKCkge1xuICBpZiAoYmFja2dyb3VuZEF1ZGlvICYmICFiYWNrZ3JvdW5kQXVkaW8ucGF1c2VkKSB7XG4gICAgYmFja2dyb3VuZEF1ZGlvLnBhdXNlKCk7XG4gIH1cbn1cblxuLy8g6ZmN5L2O6IOM5pmv6Z+z5LmQ6Z+z6YeP77yIQUnor63pn7Pml7bvvIlcbmZ1bmN0aW9uIGxvd2VyQmFja2dyb3VuZE11c2ljKCkge1xuICBpZiAoYmFja2dyb3VuZEF1ZGlvKSB7XG4gICAgYmFja2dyb3VuZEF1ZGlvLnZvbHVtZSA9IG9yaWdpbmFsVm9sdW1lICogMC4xOyAvLyDpmY3kvY7liLAxMCVcbiAgfVxufVxuXG4vLyDmgaLlpI3og4zmma/pn7PkuZDpn7Pph49cbmZ1bmN0aW9uIHJlc3RvcmVCYWNrZ3JvdW5kTXVzaWMoKSB7XG4gIGlmIChiYWNrZ3JvdW5kQXVkaW8pIHtcbiAgICBiYWNrZ3JvdW5kQXVkaW8udm9sdW1lID0gb3JpZ2luYWxWb2x1bWU7XG4gIH1cbn1cblxuLy8g5YGc5q2i5b2T5YmN6K+t6Z+z5bm25riF56m66Zif5YiXXG5leHBvcnQgZnVuY3Rpb24gc3RvcEFsbFNwZWVjaCgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5zcGVlY2hTeW50aGVzaXMpIHtcbiAgICB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLmNhbmNlbCgpO1xuICAgIGlzU3BlYWtpbmcgPSBmYWxzZTtcbiAgICBzcGVlY2hRdWV1ZSA9IFtdO1xuICB9XG59XG5cbi8vIOWkhOeQhuivremfs+mYn+WIl1xuZnVuY3Rpb24gcHJvY2Vzc05leHRTcGVlY2goKSB7XG4gIGlmIChzcGVlY2hRdWV1ZS5sZW5ndGggPT09IDAgfHwgaXNTcGVha2luZykge1xuICAgIHJldHVybjtcbiAgfVxuICBcbiAgY29uc3QgbmV4dFRleHQgPSBzcGVlY2hRdWV1ZS5zaGlmdCgpO1xuICBpZiAobmV4dFRleHQpIHtcbiAgICBzcGVha05vdyhuZXh0VGV4dCk7XG4gIH1cbn1cblxuLy8g5aSE55CG5b6F5aSE55CG55qEcm9hc3Tkuovku7bpmJ/liJdcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NOZXh0Um9hc3RFdmVudCgpIHtcbiAgLy8g5YWI5aSE55CG6K+t6Z+z6Zif5YiXXG4gIHByb2Nlc3NOZXh0U3BlZWNoKCk7XG4gIFxuICAvLyDlpoLmnpzmsqHmnInor63pn7PlnKjmkq3mlL7kuJTmnInlvoXlpITnkIbnmoTkuovku7bvvIzlpITnkIbkuIvkuIDkuKrkuovku7ZcbiAgaWYgKCFpc1NwZWFraW5nICYmIHBlbmRpbmdSb2FzdEV2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgbmV4dEV2ZW50ID0gcGVuZGluZ1JvYXN0RXZlbnRzLnNoaWZ0KCk7XG4gICAgaWYgKG5leHRFdmVudCkge1xuICAgICAgY29uc29sZS5sb2coJ+WkhOeQhuW+heWkhOeQhueahOS6i+S7tjonLCBuZXh0RXZlbnQpO1xuICAgICAgLy8g5bu26L+f5LiA54K55pe26Ze05YaN5aSE55CG77yM6YG/5YWN6L+H5LqO6aKR57mBXG4gICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IGdldFJvYXN0TWVzc2FnZShuZXh0RXZlbnQpO1xuICAgICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICAgIHNwZWFrKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9LCA1MDApO1xuICAgIH1cbiAgfVxufVxuXG4vLyDnq4vljbPmkq3mlL7or63pn7PvvIjlhoXpg6jlh73mlbDvvIlcbmZ1bmN0aW9uIHNwZWFrTm93KHRleHQ6IHN0cmluZykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnNwZWVjaFN5bnRoZXNpcykge1xuICAgIGlzU3BlYWtpbmcgPSB0cnVlO1xuICAgIFxuICAgIC8vIEFJ6K+t6Z+z5byA5aeL5pe26ZmN5L2O6IOM5pmv6Z+z5LmQ6Z+z6YeP77yI5LyY5YWIQUnor63pn7PvvIlcbiAgICBsb3dlckJhY2tncm91bmRNdXNpYygpO1xuICAgIFxuICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dCk7XG4gICAgdXR0ZXJhbmNlLmxhbmcgPSAnemgtQ04nO1xuICAgIFxuICAgIC8vIOiOt+WPluWPr+eUqOeahOivremfs+WIl+ihqFxuICAgIGNvbnN0IHZvaWNlcyA9IHdpbmRvdy5zcGVlY2hTeW50aGVzaXMuZ2V0Vm9pY2VzKCk7XG4gICAgbGV0IHNlbGVjdGVkVm9pY2UgPSBudWxsO1xuICAgIGlmIChjdXJyZW50UGVyc29uYSA9PT0gJ3Npc3RlcicpIHtcbiAgICAgIC8vIOWwj+eUnOWmue+8muWvu+aJvuS4reaWh+Wls+WjsFxuICAgICAgc2VsZWN0ZWRWb2ljZSA9IHZvaWNlcy5maW5kKHZvaWNlID0+IFxuICAgICAgICB2b2ljZS5sYW5nLmluY2x1ZGVzKCd6aCcpICYmIFxuICAgICAgICAodm9pY2UubmFtZS5pbmNsdWRlcygnRmVtYWxlJykgfHwgdm9pY2UubmFtZS5pbmNsdWRlcygn5aWzJykgfHwgXG4gICAgICAgICB2b2ljZS5uYW1lLmluY2x1ZGVzKCfnvo7lmIknKSB8fCB2b2ljZS5uYW1lLmluY2x1ZGVzKCdZYW95YW8nKSB8fFxuICAgICAgICAgdm9pY2UubmFtZS5pbmNsdWRlcygnWGlhb3lpJykgfHwgdm9pY2UubmFtZS5pbmNsdWRlcygnWGlhb21vJykpXG4gICAgICApIHx8IHZvaWNlcy5maW5kKHZvaWNlID0+IHZvaWNlLmxhbmcuaW5jbHVkZXMoJ3poJykpO1xuICAgICAgXG4gICAgICB1dHRlcmFuY2UucGl0Y2ggPSAxLjI1OyAvLyDnlJznvo7kvYbkuI3ov4fkuo7lsJbplJBcbiAgICAgIHV0dGVyYW5jZS5yYXRlID0gMC45NTsgIC8vIOeojeW+ruaFouS4gOeCue+8jOabtOa4qeaflFxuICAgICAgdXR0ZXJhbmNlLnZvbHVtZSA9IDAuODU7IC8vIOmAguS4remfs+mHj1xuICAgIH0gZWxzZSB7XG4gICAgIFxuICAgICAgLy8g5bCP5ZOl5ZOl77ya5bCd6K+V5om+55S35aOw77yM5aaC5p6c5om+5LiN5Yiw5bCx55So5p6B5L2O6Z+z6LCDXG4gICAgICBzZWxlY3RlZFZvaWNlID0gdm9pY2VzLmZpbmQodm9pY2UgPT4gXG4gICAgICAgIHZvaWNlLmxhbmcuaW5jbHVkZXMoJ3poJykgJiYgXG4gICAgICAgICh2b2ljZS5uYW1lLmluY2x1ZGVzKCdSZWVkJykgfHwgdm9pY2UubmFtZS5pbmNsdWRlcygn55S3JykgfHwgXG4gICAgICAgICB2b2ljZS5uYW1lLmluY2x1ZGVzKCdZdW55YW5nJykgfHwgdm9pY2UubmFtZS5pbmNsdWRlcygnS2FuZ2thbmcnKSlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIOWmguaenOayoeaJvuWIsOeUt+WjsO+8jOWwneivleiLseaWh+eUt+WjsFxuICAgICAgaWYgKCFzZWxlY3RlZFZvaWNlKSB7XG4gICAgICAgIHNlbGVjdGVkVm9pY2UgPSB2b2ljZXMuZmluZCh2b2ljZSA9PiBcbiAgICAgICAgICB2b2ljZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21hbGUnKSB8fFxuICAgICAgICAgIHZvaWNlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZGF2aWQnKSB8fFxuICAgICAgICAgIHZvaWNlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbWFyaycpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOi/mOaYr+ayoeaJvuWIsOWwseeUqOm7mOiupOeahO+8jOS9huiwg+aVtOWPguaVsFxuICAgICAgaWYgKCFzZWxlY3RlZFZvaWNlKSB7XG4gICAgICAgIHNlbGVjdGVkVm9pY2UgPSB2b2ljZXMuZmluZCh2b2ljZSA9PiB2b2ljZS5sYW5nLmluY2x1ZGVzKCd6aCcpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdXR0ZXJhbmNlLnBpdGNoID0gMC4zOyAgLy8g5p6B5L2O6Z+z6LCDXG4gICAgICB1dHRlcmFuY2UucmF0ZSA9IDAuNzsgICAvLyDmhaLor63pgJ9cbiAgICAgIHV0dGVyYW5jZS52b2x1bWUgPSAxLjA7IC8vIOacgOWkp+mfs+mHj1xuICAgIH1cbiAgICBcbiAgICBpZiAoc2VsZWN0ZWRWb2ljZSkge1xuICAgICAgdXR0ZXJhbmNlLnZvaWNlID0gc2VsZWN0ZWRWb2ljZTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYOW8gOWni+aSreaUvuivremfszogJHt0ZXh0fWApO1xuICAgIFxuICAgIC8vIOivremfs+e7k+adn+WQjuWkhOeQhuS4i+S4gOS4qlxuICAgIHV0dGVyYW5jZS5vbmVuZCA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCfor63pn7Pmkq3mlL7lrozmiJAnKTtcbiAgICAgIGlzU3BlYWtpbmcgPSBmYWxzZTtcbiAgICAgIFxuICAgICAgLy8gQUnor63pn7Pnu5PmnZ/lkI7mgaLlpI3og4zmma/pn7PkuZDpn7Pph49cbiAgICAgIHJlc3RvcmVCYWNrZ3JvdW5kTXVzaWMoKTtcbiAgICAgIFxuICAgICAgLy8g5aSE55CG5b6F5aSE55CG55qE5LqL5Lu26Zif5YiXXG4gICAgICBwcm9jZXNzTmV4dFJvYXN0RXZlbnQoKTtcbiAgICB9O1xuICAgIFxuICAgIHV0dGVyYW5jZS5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ+ivremfs+aSreaUvuWHuumUmScpO1xuICAgICAgaXNTcGVha2luZyA9IGZhbHNlO1xuICAgICAgXG4gICAgICAvLyDlh7rplJnml7bkuZ/opoHmgaLlpI3og4zmma/pn7PkuZDpn7Pph49cbiAgICAgIHJlc3RvcmVCYWNrZ3JvdW5kTXVzaWMoKTtcbiAgICAgIFxuICAgICAgLy8g5aSE55CG5b6F5aSE55CG55qE5LqL5Lu26Zif5YiXXG4gICAgICBwcm9jZXNzTmV4dFJvYXN0RXZlbnQoKTtcbiAgICB9O1xuICAgIFxuICAgIHdpbmRvdy5zcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0ZXJhbmNlKTtcbiAgfVxufVxuXG4vLyDkuLvopoHnmoTor63pn7Pmkq3mlL7lh73mlbBcbmV4cG9ydCBmdW5jdGlvbiBzcGVhayh0ZXh0OiBzdHJpbmcpIHtcbiAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpID09PSAnJykgcmV0dXJuO1xuICBcbiAgLy8g5aaC5p6c5b2T5YmN5q2j5Zyo5pKt5pS+6K+t6Z+z77yM5b+955Wl5paw55qE6K+t6Z+z6K+35rGCXG4gIGlmIChpc1NwZWFraW5nKSB7XG4gICAgY29uc29sZS5sb2coYOivremfs+ato+WcqOaSreaUvuS4re+8jOW/veeVpeaWsOivremfszogJHt0ZXh0LnRyaW0oKX1gKTtcbiAgICByZXR1cm47XG4gIH1cbiAgXG4gIC8vIOebtOaOpeaSreaUvuivremfs1xuICBzcGVha05vdyh0ZXh0LnRyaW0oKSk7XG59Il0sIm5hbWVzIjpbIkFQSV9LRVkiLCJCQVNFX1VSTCIsImN1cnJlbnRQZXJzb25hIiwiTWF0aCIsInJhbmRvbSIsImlzU3BlYWtpbmciLCJzcGVlY2hRdWV1ZSIsInBlbmRpbmdSb2FzdEV2ZW50cyIsImxhc3RSZXF1ZXN0VGltZSIsIk1JTl9SRVFVRVNUX0lOVEVSVkFMIiwibWVzc2FnZUhpc3RvcnkiLCJNQVhfSElTVE9SWV9TSVpFIiwic2Vzc2lvbk1lc3NhZ2VDb3VudCIsImJhY2tncm91bmRBdWRpbyIsIm9yaWdpbmFsVm9sdW1lIiwiZ2V0UGVyc29uYSIsImlzTWVzc2FnZUR1cGxpY2F0ZSIsIm1lc3NhZ2UiLCJ0cmltIiwidHJpbW1lZE1lc3NhZ2UiLCJpbmNsdWRlcyIsImhpc3RvcnlNc2ciLCJjYWxjdWxhdGVTaW1pbGFyaXR5IiwiY29uc29sZSIsImxvZyIsInN0cjEiLCJzdHIyIiwibGVuZ3RoIiwiY2hhcnMxIiwiU2V0IiwiY2hhcnMyIiwiaW50ZXJzZWN0aW9uIiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwieCIsImhhcyIsInVuaW9uIiwic2l6ZSIsImFkZFRvSGlzdG9yeSIsInB1c2giLCJzaGlmdCIsImdldFJvYXN0TWVzc2FnZSIsImV2ZW50IiwiaXNTaXN0ZXIiLCJub3ciLCJjb250ZXh0dWFsUHJvbXB0Iiwic3lzdGVtUHJvbXB0IiwiYXR0ZW1wdCIsImRhdGEiLCJjb250cm9sbGVyIiwidGltZW91dElkIiwicmVzcG9uc2UiLCJyYXdDb250ZW50IiwiZmlsdGVyZWRDb250ZW50IiwiZXJyb3IiLCJBYm9ydENvbnRyb2xsZXIiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsImpvaW4iLCJ0ZW1wZXJhdHVyZSIsIm1pbiIsIm1heF90b2tlbnMiLCJ0b3BfcCIsImZyZXF1ZW5jeV9wZW5hbHR5IiwicHJlc2VuY2VfcGVuYWx0eSIsInNpZ25hbCIsImNsZWFyVGltZW91dCIsInN0YXR1cyIsIlByb21pc2UiLCJyZXNvbHZlIiwiRXJyb3IiLCJvayIsImpzb24iLCJjaG9pY2VzIiwiZmlsdGVyQnJhY2tldENvbnRlbnQiLCJEYXRlIiwiY2xlYXJNZXNzYWdlSGlzdG9yeSIsImdldElzU3BlYWtpbmciLCJnZXRQZW5kaW5nRXZlbnRzQ291bnQiLCJ0ZXh0IiwicmVwbGFjZSIsImluaXRpYWxpemVTcGVlY2hTeXN0ZW0iLCJ3aW5kb3ciLCJzcGVlY2hTeW50aGVzaXMiLCJpbml0aWFsaXplQmFja2dyb3VuZE11c2ljIiwiQXVkaW8iLCJsb29wIiwidm9sdW1lIiwicHJlbG9hZCIsInBsYXlCYWNrZ3JvdW5kTXVzaWMiLCJwYXVzZWQiLCJwbGF5IiwidGhlbiIsImNhdGNoIiwicGF1c2VCYWNrZ3JvdW5kTXVzaWMiLCJwYXVzZSIsImxvd2VyQmFja2dyb3VuZE11c2ljIiwicmVzdG9yZUJhY2tncm91bmRNdXNpYyIsInN0b3BBbGxTcGVlY2giLCJjYW5jZWwiLCJwcm9jZXNzTmV4dFNwZWVjaCIsIm5leHRUZXh0Iiwic3BlYWtOb3ciLCJwcm9jZXNzTmV4dFJvYXN0RXZlbnQiLCJuZXh0RXZlbnQiLCJzcGVhayIsInV0dGVyYW5jZSIsIlNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsImxhbmciLCJ2b2ljZXMiLCJnZXRWb2ljZXMiLCJzZWxlY3RlZFZvaWNlIiwiZmluZCIsInZvaWNlIiwibmFtZSIsInBpdGNoIiwicmF0ZSIsInRvTG93ZXJDYXNlIiwib25lbmQiLCJvbmVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/aiService.ts\n"));

/***/ })

});